# TIPs C PROGRAMMING #
by soizensun 

~~~~~~~ เรื่อง   การ Declare variable แบบ  static ~~~~~~~~~

ตัวอย่าง  code แบบ ธรรมดา 

	#include<stdio.h>

	int fn(int x){
		int a = 3;
		printf("a_start = %d\n",a );
		printf("a = a+x => %d = %d+%d\n",a+x,a,x );
		a = a+x;
		printf("a_end = %d\n",a );
		printf("============================================\n");
	}
	int main(){
		fn(2);
		fn(4);
		fn(6);
		fn(8);
	}

code นี้ ผมได้สร้าง function ชื่อว่า  fn() ขึ้นมา โดยได้ประกาศตัวแปร a ชนิด int ขึ้นมา โดยทำการบวก กับค่า x 
ได้ผลการ run ออกมาดังนี้

	a_start = 3
	a = a+x => 5 = 3+2
	a_end = 5
	============================================
	a_start = 3
	a = a+x => 7 = 3+4
	a_end = 7
	============================================
	a_start = 3
	a = a+x => 9 = 3+6
	a_end = 9
	============================================
	a_start = 3
	a = a+x => 11 = 3+8
	a_end = 11
	============================================

จะเห็นได้ว่า ใน function ตัวแปร a ได้ถูกประกาศขึ้นทุกครั้ง
แต่ถ้าเราประกาศ ตัวแปร a แบบ static จาก  int a = 3; เป็น  static int a = 3; ดังนี้

ตัวอย่าง code แบบ ประกาศแบบ static

	#include<stdio.h>

	int fn(int x){
		static int a = 3;
		printf("a_start = %d\n",a );
		printf("a = a+x => %d = %d+%d\n",a+x,a,x );
		a = a+x;
		printf("a_end = %d\n",a );
		printf("============================================\n");
	}
	int main(){
		fn(2);
		fn(4);
		fn(6);
		fn(8);
	}

สังเกตที่บรรทัดที่ 4 ได้ประกาศว่า static int a = 3;   มาดูผลการ run ว่าจะเกิดอะไรขึ้น

	a_start = 3
	a = a+x => 5 = 3+2
	a_end = 5
	============================================
	a_start = 5
	a = a+x => 9 = 5+4
	a_end = 9
	============================================
	a_start = 9
	a = a+x => 15 = 9+6
	a_end = 15
	============================================
	a_start = 15
	a = a+x => 23 = 15+8
	a_end = 23
	============================================
เห็นได้ว่า ตัวแปร  a ไม่เปลี่ยนเป็น 3  เพราะว่า ตัวแปร  int a จะถูกจองพื้นที่ใน memory แค่ครั้งเดียว
โดย การประกาศ  static int a; จะทำงานได้แค่ใน function เดียว
 
